<div class="container">
  <!-- En-t√™te -->
  <div class="header">
    <h1>Gestion des Personnes</h1>
    <p>Total : {{ personnes.length }} personne(s)</p>
  </div>

  <!-- FILTRES REGION & DEPARTEMENT --> 
  <div class="filters">
    <label>Filtrer par R√©gion</label>
    <select [(ngModel)]="selectedRegionId" (change)="applyFilters()">
      <option [value]="null">-- Toutes les r√©gions --</option>
      <option *ngFor="let region of regions" [value]="region.id">{{ region.nom }}</option>
    </select>

    <label>Filtrer par D√©partement</label>
    <select [(ngModel)]="selectedDepartementId" (change)="applyFilters()">
      <option [value]="null">-- Tous les d√©partements --</option>
      <option *ngFor="let dept of departements" [value]="dept.id">{{ dept.nom }}</option>
    </select>

    <button (click)="resetFilters()">R√©initialiser les filtres</button>
  <p>{{ filteredPersonnes.length }} personne(s) trouv√©e(s)</p>

  </div>

  <!-- Formulaire d'ajout/modification -->
  <div class="form-card">
    <h2>{{ editingPersonneId ? 'Modifier la Personne' : 'Ajouter une Nouvelle Personne' }}</h2>
    <form (ngSubmit)="addPersonne()">
      <div class="form-grid">
      <div class="form-group">
      <label>Nom *</label>
      <input type="text" [(ngModel)]="newPersonne.nom" name="nom" required placeholder="Nom" />
</div>
      <div class="form-group">

      <label>Pr√©nom *</label>
      <input type="text" [(ngModel)]="newPersonne.prenom" name="prenom" required placeholder="Pr√©nom" />
      </div>
      <div class="form-group">

      <label>D√©partement *</label>
      <select [(ngModel)]="newPersonne.departementId" name="departementId" required>
        <option value="" disabled selected>S√©lectionner un d√©partement</option>
        <option *ngFor="let dep of departements" [value]="dep.id">
          {{ dep.nom }}
        </option>
      </select>
      </div>
      </div>
      <div class="form-actions">
        <button type="submit">{{ editingPersonneId ? 'Modifier' : 'Ajouter' }}</button>
        <button type="button" (click)="resetForm()">Annuler</button>
      </div>
    </form>
  </div>

  <!-- Liste des personnes -->
  <div class="personne-list">
    <h2>Liste des Personnes</h2>
    <table>
      <thead>
        <tr>
          <th>Initiales</th>
          <th>Nom</th>
          <th>Pr√©nom</th>
          <th>D√©partement</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of filteredPersonnes">
          <td>{{ getInitials(p.nom, p.prenom) }}</td>
          <td>{{ p.nom }}</td>
          <td>{{ p.prenom }}</td>
          <td>{{ p.departement?.nom }}</td>
          <td>
            <button (click)="editPersonne(p)">‚úèÔ∏è</button>
            <button (click)="deletePersonne(p.id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Notification simple -->
  <div *ngIf="notification.show" class="notification" [ngClass]="notification.type">
    {{ notification.message }}
  </div>
</div>
