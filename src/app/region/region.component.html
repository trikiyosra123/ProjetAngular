<div class="container">
  <h1>Gestion des RÃ©gions</h1>
 <!-- Bouton pour gÃ©nÃ©rer/tÃ©lÃ©charger le PDF Ã  gauche -->
  <div class="report-actions ">
    <button (click)="downloadReport()" class="btn-download">
      ğŸ“„ TÃ©lÃ©charger le PDF
    </button>
  </div>
  <!-- Formulaire d'ajout/modification en haut -->
  <div class="form-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="icon">{{ editingRegionId ? 'âœï¸' : 'â•' }}</span>
        {{ editingRegionId ? 'Modifier la RÃ©gion' : 'Ajouter une RÃ©gion' }}
      </h2>
      <span *ngIf="editingRegionId" class="edit-badge">Mode Ã©dition</span>
    </div>

    <form (ngSubmit)="addRegion()" class="modern-form">
      <div class="form-row">
        <div class="form-field">
          <label for="nom" class="field-label">
            Nom de la rÃ©gion <span class="required">*</span>
          </label>
          <input 
            type="text" 
            id="nom"
            [(ngModel)]="newRegion.nom"
            name="nom" 
            placeholder="Entrer une rÃ©gion"
            required
            class="field-input">
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          <span class="icon">{{ editingRegionId ? 'ğŸ’¾' : 'â•' }}</span>
          {{ editingRegionId ? 'Enregistrer les modifications' : 'Ajouter la rÃ©gion' }}
        </button>
        <button 
          *ngIf="editingRegionId" 
          type="button" 
          (click)="cancelEdit()" 
          class="btn btn-secondary">
          âœ– Annuler
        </button>
      </div>
    </form>
  </div>

 

  <!-- Grille des rÃ©gions -->
  <div class="regions-grid">
    <div 
      class="region-card" 
      *ngFor="let region of regions" 
      (click)="selectRegion(region)"
      [class.selected]="selectedRegionId === region.id">

      <h2>{{ region.nom }}</h2>
      <p>ID: {{ region.id }}</p>

      <!-- Boutons actions -->
      <div class="action-buttons">
        <button 
          (click)="editRegion(region); $event.stopPropagation()" 
          class="btn-action btn-edit"
          [disabled]="editingRegionId === region.id"
          [title]="editingRegionId === region.id ? 'En cours d\'Ã©dition' : 'Modifier'">
          âœï¸
        </button>
        <button 
          (click)="deleteRegion(region.id!); $event.stopPropagation()"
          class="btn-action btn-delete"
          title="Supprimer">
          ğŸ—‘ï¸
        </button>
      </div>

      <span class="click-hint">Cliquer pour voir les dÃ©partements</span>

      <!-- Liste des dÃ©partements si cette rÃ©gion est sÃ©lectionnÃ©e -->
      <div class="departements-list" *ngIf="selectedRegionId === region.id">
        <h3>DÃ©partements</h3>
        <div *ngIf="departements.length === 0">Aucun dÃ©partement</div>
        <ul>
          <li *ngFor="let dept of departements">{{ dept.nom }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
