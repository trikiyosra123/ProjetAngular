<div class="container">
  <div class="header">
    <h1>Gestion des D√©partements</h1>
    <p class="subtitle">Administrez vos d√©partements et leurs r√©gions associ√©es</p>
  </div>

  <!-- Formulaire d'ajout/modification -->
  <div class="form-card">
    <h2>
      <span *ngIf="!editingDeptId">Ajouter un D√©partement</span>
      <span *ngIf="editingDeptId" class="text-warning">‚úèÔ∏è Modifier le D√©partement</span>
    </h2>
    <form (ngSubmit)="addDepartement()">
      <div class="form-grid">
        <div class="form-group">
          <label>Nom du d√©partement *</label>
          <input 
            type="text" 
            class="form-input"
            [(ngModel)]="newDept.nom" 
            name="nom" 
            required 
            placeholder="Entrez le nom"
          />
        </div>
        
        <div class="form-group">
          <label>Description</label>
          <textarea 
            class="form-input"
            [(ngModel)]="newDept.description" 
            name="description" 
            placeholder="Description"
          ></textarea>
        </div>
        
        <div class="form-group">
          <label>R√©gion *</label>
          <select 
            class="form-select"
            [(ngModel)]="newDept.regionId" 
            name="regionId" 
            required
          >
            <option value="0" disabled>S√©lectionner une r√©gion</option>
            <option *ngFor="let region of regions" [value]="region.id">
              {{ region.nom }}
            </option>
          </select>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            {{ editingDeptId ? '‚úèÔ∏è' : '+' }}
            {{ editingDeptId ? 'Enregistrer les modifications' : 'Ajouter le d√©partement' }}
          </button>
          
        </div>
      </div>
    </form>
  </div>

  <!-- Liste des d√©partements -->
  <div class="table-card">
    <div class="table-header">
      <h2>Liste des D√©partements</h2>
      <div class="badge">{{ departements.length }} d√©partement(s)</div>
    </div>
    
    <div *ngIf="departements.length === 0" class="empty-state">
      <div class="empty-content">
        <div class="empty-icon">üìã</div>
        <p>Aucun d√©partement trouv√©</p>
        <small>Commencez par ajouter votre premier d√©partement</small>
      </div>
    </div>
    
    <div *ngIf="departements.length > 0" class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom du d√©partement</th>
            <th>Description</th>
            <th>R√©gion</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dept of departements" class="table-row">
            <td class="font-medium">#{{ dept.id }}</td>
            <td class="font-medium">{{ dept.nom }}</td>


            <td>
              <span *ngIf="dept.description; else noDescription">
                {{ dept.description }}
              </span>
              <ng-template #noDescription>
                <span class="text-muted">Aucune description</span>
              </ng-template>
            </td>
          <td>
  <span class="region-badge">
    {{ dept.region?.nom || 'R√©gion inconnue' }}
  </span>
</td>



            <td class="text-center">
              <button 
                (click)="editDepartement(dept)" 
                class="btn btn-modf btn-sm"
                [disabled]="editingDeptId === dept.id"
              >
              
                <span class="btn-icon">‚úèÔ∏è</span>
                {{ editingDeptId === dept.id ? 'En cours...' : 'Modifier' }}
              </button>
            </td>
            <td class="text-center">
              <button 
                (click)="deleteDepartement(dept.id)" 
                class="btn btn-suppr btn-sm"
              >
                <span class="btn-icon">üóëÔ∏è</span>
                Supprimer
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>